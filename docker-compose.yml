version: '3.1'

services:

  db:
    image: mysql
    container_name: mysql-server
    restart: always
    volumes:
      - ./mysql/my.cnf:/etc/my.cnf
      - ./mysql/data:/var/lib/mysql
      - ./mysql/mysql.log:/var/log/mysql/mysql.log
    environment:
      MYSQL_ROOT_PASSWORD: root
      #MYSQL_DATABASE: databasename
      #MYSQL_USER: dbusername
      #MYSQL_PASSWORD: dbuserpassword
    ports:
      - $MYSQL_PORT:3306  # expose container's 3306 on host's 33060

  web:
    #image: php:apache
    #dockerfile: ./Dockerfile
    image: apachephp  # Crea una nuova image a partire da php:apache
    build: .
    container_name: web-server
    restart: always
    links:
      - db
    volumes:
      - ./www:/var/www/html
    ports:
      - $HTTP_PORT:80  # expose container's 80 on host's 8080, the web service

#  adminer:
#    image: adminer
#    restart: always
#    ports:
#      - 8081:8080

